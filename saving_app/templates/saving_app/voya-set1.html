{% load staticfiles %}


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Demo Site</title>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/notify/0.4.2/notify.min.js"></script>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="{% static 'saving_app/voya-stylesheet.css'%}">


    <!-- Hotjar Tracking Code for https://dry-hamlet-57387.herokuapp.com/ -->
    <script>
        (function(h, o, t, j, a, r) {
            h.hj = h.hj || function() {
                (h.hj.q = h.hj.q || []).push(arguments)
            };
            h._hjSettings = {
                hjid: 240473,
                hjsv: 5
            };
            a = o.getElementsByTagName('head')[0];
            r = o.createElement('script');
            r.async = 1;
            r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
            a.appendChild(r);
        })(window, document, '//static.hotjar.com/c/hotjar-', '.js?sv=');
    </script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <div class="wrapper">

        <!-- Fixed navbar -->
        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">
                <ul class="nav navbar-nav navbar-left">
                    <li id="navbar-text"><img src="{% static 'saving_app/logo.png'%}" height=30></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="navbar-right-text dummy">Need Help?</li>
                    <li class="navbar-right-text dummy">Steps to Save</li>
                    <li class="navbar-right-text dummy">About My Plan</li>
                    <li class="navbar-right-text dummy">Important Information</li>
                </ul>
            </div>
        </nav>

        <div class="container" id="main">

            <div class="row" style="margin:0px 50px">
                <div class="col-md-4 toggle active">
                    About Me
                    <div class="upside-down-triangle"></div>
                </div>
                <div class="col-md-4 toggle inactive">Enrollment Choices</div>
                <div class="col-md-4 toggle inactive">Review & Confirm</div>
            </div>

            <div class="row" id="row1" style="padding-bottom:0px">
                <p id="h1">Tell us more about you and your retirement goals</p>
            </div>


            <div class="row" id="form">
                <div id="title">Personal Info</div>
                <form>
                    <div class="form-group">
                        <label for="age" id="fieldname">How old are you now?</label>
                        <input type="number" class="form-control" id="age">
                    </div>
                    <div class="form-group">
                        <label for="retAge" id="fieldname">By what age do you want to retire?</label>
                        <input type="number" class="form-control" id="retAge">
                    </div>
                </form>
            </div>

            <div class="row" id="form">
                <div id="title">Financial Info</div>
                <form>
                    <div class="form-group">
                        <label for="salary" id="fieldname">What is your annual salary?</label>
                        <div class="input-group">
                            <div class="input-group-addon">$</div>
                            <input type="number" class="form-control-addon" id="salary">
                        </div>


                        <label for="savings" id="fieldname">How much have you already saved?</label>
                        <div class="input-group">
                            <div class="input-group-addon">$</div>
                            <input type="number" class="form-control-addon" id="savings">
                        </div>
                    </div>

                </form>

            </div>

            <div class="row" align="center" style="margin-top:60px">
                <p id="h1" style="margin-bottom:30px"><span id="name"></span>, based on these numbers, will you be ready?</p>
            </div>
            <div class="row" style="margin:60px; text-align:center; position:relative">
                <span id="back"><i class="fa fa-angle-left" aria-hidden="true" style="font-size:18px; font-weight:800"></i>&nbsp;&nbsp;&nbsp;Back</span>

                <button class="primary button_med" id="others" type="submit" style="margin-left:15px">Let's See</button>
            </div>
        </div>

        <div class="footer">
            <div class="container">
                <div class="col-md-10" style="padding-left:0px">
                    <p class="text"><span class="link dummy">Terms of use</span>&nbsp;&nbsp;&nbsp;<span style="color:#cccccc">|</span>&nbsp;&nbsp;&nbsp;<span class="link dummy">Security</span> </p>
                    <p class="text">This test site was designed by researchers at Carnegie Mellon University and City University London.</p>
                </div>
                <div class="col-md-2">
                    <p class="logo"><img src="{% static 'saving_app/logo.png'%}" height=30></p>
                </div>
            </div>
        </div>
    </div>



</body>
<script>
    $.notify.addStyle('notify', {
        html: "<div style='border-radius: 10px;'><span data-notify-text/></div>",
        classes: {
            base: {
                "white-space": "nowrap",
                "background-color": "#f47f00",
                "padding": "5px"
            }
        }
    })
</script>

<script>
    $(document).ready(function() {
        $(window).on('beforeunload', function() {
            return ""
        });

        var startTime = new Date();

        user_id = "{{ user_id }}"
        name = "{{ name }}"
        clicks = "x"


        // Setting up notification of dumb button
        $(".dummy").bind("click", function() {
            $(this).notify("Sorry, this link is non-functional.", {
                position: "bottom center",
                autoHideDelay: 5000,
                className: "notify"
            })
        })

        $("#name").html(name)
        $("#back").bind("click", function() {
            var endTime = new Date();
            var timeDiff = (endTime - startTime) / 1000;
            $.get("/update", {
                user_id: user_id,
                name: name,
                set1_time: timeDiff,
                clicks: clicks
            }, function(data) {
                $(window).off('beforeunload')
                window.location.href = "{% url 'choice'%}" + "?user_id=" + user_id + "&name=" + name
            })
        })
        $("#others").bind("click", function() {
            scroll_to = function(j) {
                $('html, body').animate({
                    scrollTop: j.offset().top - 120
                }, 1000);
            }
            if (!$.isNumeric($("#age").val())) {
                scroll_to(
                    $("#age").notify("Please enter a valid number", {
                        position: "right",
                        autoHideDelay: 5000,
                        className: "notify"
                    })
                )
                return
            }
            if (!$.isNumeric($("#retAge").val())) {
                scroll_to(
                    $("#retAge").notify("Please enter a valid number", {
                        position: "right",
                        autoHideDelay: 5000,
                        className: "notify"
                    })
                )
                return
            }
            if (parseInt($("#retAge").val()) < parseInt($("#age").val())) {
                scroll_to(
                    $("#retAge").notify("Your retirement age is smaller than your age", {
                        position: "right",
                        autoHideDelay: 5000,
                        className: "notify"
                    })
                )
                return
            }
            if (!$.isNumeric($("#salary").val())) {
                scroll_to(
                    $("#salary").notify("Please enter a valid number", {
                        position: "right",
                        autoHideDelay: 5000,
                        className: "notify"
                    })
                )
                return
            }
            if (!$.isNumeric($("#savings").val())) {
                scroll_to(
                    $("#savings").notify("Please enter a valid number", {
                        position: "right",
                        autoHideDelay: 5000,
                        className: "notify"
                    })
                )
                return
            }
            var endTime = new Date();
            var timeDiff = (endTime - startTime) / 1000;
            $.get("/update", {
                user_id: user_id,
                name: name,
                set1_time: timeDiff,
                clicks: clicks
            }, function(data) {
                $(window).off('beforeunload')
                window.location.href = "{% url 'set2'%}" + "?user_id=" + user_id + "&name=" + name + "&age=" + $("#age").val() + "&salary=" + $("#salary").val() + "&savings=" + $("#savings").val()
            })
        })
    })
</script>




</html>
